<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
	<link rel="stylesheet" href="/static/progress_bar.css">
	<title>jQuery File Upload Example</title>
</head>
<body>
	<input id="fileupload" type="file" name="files[]" data-url="data_url" multiple>
	<div id="progress">
		<div class="bar" style="width: 0%;"></div>
	</div>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script src="/static/vendor/jquery.ui.widget.js"></script>
	<script src="/static/jquery.iframe-transport.js"></script>
	<script src="/static/jquery.fileupload.js"></script>
	<script>
		$(function () {
			$('#fileupload').fileupload({
				dataType: 'json',
				done: function (e, data) {
					console.log("DONE");
					console.log(data);
					$.each(data.result.files, function (index, file) {
						$('<p/>').text(file.name).appendTo(document.body);
						console.log(file.name);
					});
				},
				error: function (e, data) {
					$('<p/>').text(e.readyState).appendTo(document.body);
					$('<p/>').text(data).appendTo(document.body);
					console.log("ERROR")
					console.log(e);
					console.log(data);
				},
				progressall: function (e, data) {
					var progress = parseInt(data.loaded / data.total * 100, 10);
					$('#progress .bar').css(
						'width',
						progress + '%'
					);
				}
			});
		});
	</script>
</body>
</html>
